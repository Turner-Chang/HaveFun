@{
    Layout = "_Layout";
}
<!-- preloader start here -->
<div class="preloader">
    <div class="preloader-inner">
        <div class="preloader-icon">
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<!-- preloader ending here -->
<!-- scrollToTop start here -->
<a href="#" class="scrollToTop"><i class="fa-solid fa-angle-up"></i></a>
<!-- scrollToTop ending here -->
<!-- ================> login section start here <================== -->
<section class="log-reg">
    <div class="top-menu-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-5">
                    <a href="~/" class="backto-home text-black"><i class="fas fa-chevron-left"></i> 回到首頁</a>
                </div>
            </div>
        </div>
    </div>
    <div class="container" id="register">
        <div class="row">
            <div class="image">
            </div>
            <div class="col-lg-7">
                <div class="log-reg-inner">
                    <div class="section-header">
                        <h2 class="title">填寫會員資料 </h2>
                        <br />
                    </div>
                    <div class="main-content">
                        <h4 class="content-title">設定會員帳號及密碼</h4>
                        <div class="form-group">
                            <label>會員帳號*</label>
                            <input type="text" class="my-form-control" placeholder="請填入信箱" v-model.lazy.trim="account">
                            <div class="text-danger">{{accountError}}</div>
                        </div>
                        <div class="form-group">
                            <label>密碼*</label>
                            <input type="password" class="my-form-control" placeholder="請填入密碼" v-model.lazy="password">
                            <div class="text-danger">{{passwordError}}</div>
                        </div>
                        <div class="form-group">
                            <label>確認密碼*</label>
                            <input type="password" class="my-form-control" placeholder="請填入確認密碼" v-model.lazy="checkPassword" />
                            <div class="text-danger">{{checkpasswordError}}</div>
                        </div>
                        <h4 class="content-title mt-5">設定基本資料</h4>
                        <div class="form-group">
                            <label>名稱*</label>
                            <input type="text" class="my-form-control" placeholder="請填入名稱" v-model.lazy="name">
                            <div class="text-danger">{{nameError}}</div>
                        </div>
                        <div class="form-group">
                            <label>生日*</label>
                            <input type="date" class="my-form-control" v-model="birthDay" :max="birthDayMax">
                            <div class="text-danger">{{birthDayError}}</div>
                        </div>
                        <div class="form-group">
                            <label>性別*</label>
                            <div class="banner__inputlist">
                                <div class="s-input me-3">
                                    <input type="radio" name="gender1" id="males1" value="0" v-model="gender"><label for="males1">男性</label>
                                </div>
                                <div class="s-input">
                                    <input type="radio" name="gender1" id="females1" value="1" v-model="gender"><label for="females1">女性</label>
                                </div>                          
                            </div>
                            <div class="text-danger">{{genderError}}</div>
                        </div>
                        <div class="form-group">
                            <label>電話</label>
                            <input type="text" maxlength="20" class="my-form-control" placeholder="請填入電話" v-model.lazy.trim="phoneNumber">
                            <div class="text-danger">{{phoneNumberError}}</div>
                        </div>
                        <div class="form-group">
                            <label>地址</label>
                            <input type="text" maxlength="100" class="my-form-control" placeholder="請填入地址" v-model.lazy.trim="address">
                            <div class="text-danger">{{addressError}}</div>
                        </div>
                        <div class="form-group">
                            <label>大頭貼</label>
                            <input type="file" class="form-control" v-model="profilePicture" @@change="isImage" accept="image/*">
                            <div class="text-danger">{{profilePictureError}}</div>
                            <img class="imgPreview img-thumbnail" />
                        </div>
                    </div>
                    <button class="default-btn reverse" data-toggle="modal" data-target="#email-confirm"><span>建立帳號</span></button>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
<!-- ================> login section end here <================== -->

@section Scripts{
    <script>

        // ----------設定Vue-----------
        const register = Vue.createApp({
            data() {
                return {
                    account:'',
                    password:'',
                    checkPassword:'',
                    name:'',
                    address:'',
                    phoneNumber:'',
                    gender:'',
                    birthDay:'',
                    accountError:'',
                    passwordError:'',
                    checkpasswordError: '',
                    nameError:'',
                    birthDayError: '',
                    genderError:'',
                    phoneNumberError: '',
                    addressError:'',
                    profilePictureError:'',
                    ProfilePicture: null,
                    
                }
            },
            methods: {
                isImage(even){
                    let file = even.target.files[0];
                    if (file.type.startsWith('image/')) {
                        this.profilePictureError = '';
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            document.querySelector('.imgPreview').src = e.target.result;
                        }
                        reader.readAsDataURL(file);
                        this.ProfilePicture = file;
                    }else{
                        this.profilePictureError = '請傳入圖片檔';
                    }
                },
            },
            computed: {
                birthDayMax() {
                    const max = new Date();
                    max.setFullYear(max.getFullYear() - 18);
                    return max.toISOString().split('T')[0];
                }
            },
            watch: {
                account(nval, oval) {
                    this.accountError = nval;
                },
                password(nval, oval) {
                    this.passwordError = nval;
                },
                checkPassword(nval, oval) {
                    this.checkpasswordError = nval;
                },
                name(nval, oval) {
                    this.nameError = nval;
                },
                phoneNumber(nval, oval) {
                    this.phoneNumberError = nval;
                },
                birthDay(nval, oval) {
                    this.birthDayError = nval;
                },
                address(nval, oval) {
                    this.addressError = nval;
                },
            }
        }).mount('#register');
        // ----------------------------

    </script>
}                      