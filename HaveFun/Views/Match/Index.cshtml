@model UserInfo;

@section Styles
{
	<style>
		#out {
			outline: 2px solid red;
			display: flex;
			justify-content: center;
			
			height: 100%;
			margin: 0 auto;
			position: relative;
			padding: 80px;
		}

		.card {
		}

		#card-container {
			outline: 2px solid green;
			position: relative;
			width: 23rem;
			height: 500px;
		}

		.collapseCard {
			width: 105%;
			margin-top: 25px;
		}

		.cards {
			/* outline: 2px solid blue; */

			height: 500px;
			width: 23rem;
			left: 0;
			right: 0;
			top: 0px;
			bottom: 0;
			margin: auto;
			position: absolute;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			transition: transform 0.3s ease, opacity 0.3s ease;
			user-select: none;
		}


		.cards.dragging {
			transition: none;
		}

		.card-text {
			display: -webkit-box;
			-webkit-box-orient: vertical;
			overflow: hidden;
			-webkit-line-clamp: 3;
		}

		.card-body {
			display: flex;
			flex-direction: column;
		}

		.carousel-inner {
			height: 300px;
		}

		.buttons {
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			margin: auto;
			z-index: 999;
		}


		.card img {
			width: 100%;
			height: auto;
		}

		.card0 {
			z-index: 0;
		}

		.card1 {
			z-index: 1;
		}

		.card2 {
			z-index: 2;
		}

		.carousel-indicators {
			position: absolute;
			top: 0;
			right: 0;
			bottom: auto;
		}

		.buttons .btn {
			height: 60px;
			width: 60px;
			border-radius: 50%;
		}
	</style>
}


<div class="app">
	<div class="banner p-3 bg_img" style="background-image: url(assets/images/banner/bg.jpg); outline: 2px solid yellow;">
		<div class="container" style="outline:2px solid blue;">
			<div class="row justify-content-center" style="outline:2px solid red;">
				<div class="col-lg-4 col-12">
					<div class="banner__content wow fadeInUp" data-wow-duration="1.5s" data-wow-delay=".5s">
						<div class="banner__title">
							<h2>Find your ture love</h2>
							<p>Serious dating with your perfect match is just a click away.</p>
						</div>
						<div class="banner__form">
							<form action="#">
								<div class="banner__list">
									<label>Looking for</label>
									<div class="row">
										<div class="col-6">
											<label class="banner__inputlist" for="male2">
												<input type="radio" id="male2" name="me2" class="male">
												<span>Male</span>
												<span class="banner__inputlist--icon"><i class="fa-solid fa-mars"></i></span>
											</label>
										</div>
										<div class="col-6">
											<label class="banner__inputlist" for="female2">
												<input type="radio" id="female2" name="me2" class="female" checked>
												<span>Female</span>
												<span class="banner__inputlist--icon"><i class="fa-solid fa-venus"></i></span>
											</label>
										</div>
									</div>
								</div>
								<div class="banner__list">
									<label>Age</label>
									<div class="row">
										<div class="col-6">
											<label>Min</label>
											<div class="form-control">
												<input type="text" />
											</div>
										</div>
										<div class="col-6">
											<label>Max</label>
											<div class="form-control">
												<input type="text" />
											</div>
										</div>
									</div>
								</div>
								<div class="banner__list">
									@* <label>Country</label>
									<div class="row">
									<div class="col-12">
									<div class="banner__inputlist">
									<select id="country" name="country">
									<option value="Afganistan">Afghanistan</option>
									<option value="Albania">Albania</option>
									<option value="Algeria">Algeria</option>
									<option value="American Samoa">American Samoa</option>
									</select>
									</div>
									</div>
									</div> *@
								</div>
								<button type="submit" class="default-btn reverse d-block mt-5"><span>Find Your Partner</span></button>
							</form>
						</div>
					</div>
				</div>
				<div class="col-lg-8 col-12">
					<div id="out" class="wow fadeInUp" data-wow-duration="1.5s" data-wow-delay="1s">
						<div id="card-container">
							<div class="card cards card0">
								<div id="carouselExampleIndicators1" class="carousel slide">
									<div class="carousel-indicators">
										<button type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
										<button type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide-to="1" aria-label="Slide 2"></button>
										<button type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide-to="2" aria-label="Slide 3"></button>
									</div>
									<div class="carousel-inner">
										<div class="carousel-item active">
											<img src="@Url.Content(ViewBag.ImageUrlArr[0])" class="d-block w-100" alt="...">
										</div>
										<div class="carousel-item">
											<img src="@Url.Content(ViewBag.ImageUrlArr[1])" class="d-block w-100" alt="...">
										</div>
										<div class="carousel-item">
											<img src="@Url.Content(ViewBag.ImageUrlArr[2])" class="d-block w-100" alt="...">
										</div>
									</div>
									<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide="prev">
										<span class="carousel-control-prev-icon" aria-hidden="true"></span>
										<span class="visually-hidden">Previous</span>
									</button>
									<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators1" data-bs-slide="next">
										<span class="carousel-control-next-icon" aria-hidden="true"></span>
										<span class="visually-hidden">Next</span>
									</button>
								</div>
								<div class="card-body">
									<h5 class="card-title">Card title1</h5>
									<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
									<button id="btnCollapse0" data-bs-target="#collapseExample0" class="btn btn-primary detail" type="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapseExample0">Detail <i class="fa-solid fa-angle-down"></i></button>
									<div class="collapse collapsing" id="collapseExample0" style="width: 20rem; ">
										<div class="card card-body collapseCard">
											Some placeholder content for the collapse component. This panel is hidden by default but revealed when the user activates the relevant trigger.
										</div>
									</div>
								</div>
							</div>

							<div class="card cards card1">
								<div id="carouselExampleIndicators2" class="carousel slide">
									<div class="carousel-indicators">
										<button type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
										<button type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide-to="1" aria-label="Slide 2"></button>
										<button type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide-to="2" aria-label="Slide 3"></button>
									</div>
									<div class="carousel-inner">
										<div class="carousel-item active">
											<img src="@Url.Content(ViewBag.ImageUrlArr[0])" class="d-block w-100" alt="...">
										</div>
										<div class="carousel-item">
											<img src="@Url.Content(ViewBag.ImageUrlArr[1])" class="d-block w-100" alt="...">
										</div>
										<div class="carousel-item">
											<img src="@Url.Content(ViewBag.ImageUrlArr[2])" class="d-block w-100" alt="...">
										</div>
									</div>
									<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide="prev">
										<span class="carousel-control-prev-icon" aria-hidden="true"></span>
										<span class="visually-hidden">Previous</span>
									</button>
									<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide="next">
										<span class="carousel-control-next-icon" aria-hidden="true"></span>
										<span class="visually-hidden">Next</span>
									</button>
								</div>
								<div class="card-body">
									<h5 class="card-title">Card title2</h5>
									<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
									<button id="btnCollapse1" data-bs-target="#collapseExample1" class="btn btn-primary detail" type="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapseExample1">Detail <i class="fa-solid fa-angle-down"></i></button>
									<div class="collapse collapsing" id="collapseExample1" style="width: 20rem; ">
										<div class="card card-body collapseCard">
											Some placeholder content for the collapse component. This panel is hidden by default but revealed when the user activates the relevant trigger.
										</div>
									</div>
								</div>
							</div>

							<div class="card cards card2">
								<div id="carouselExampleIndicators3" class="carousel slide">
									<div class="carousel-indicators">
										<button type="button" data-bs-target="#carouselExampleIndicators3" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
										<button type="button" data-bs-target="#carouselExampleIndicators3" data-bs-slide-to="1" aria-label="Slide 2"></button>
										<button type="button" data-bs-target="#carouselExampleIndicators3" data-bs-slide-to="2" aria-label="Slide 3"></button>
									</div>
									<div class="carousel-inner">
										<div class="carousel-item active">
											<img src="@Url.Content(ViewBag.ImageUrlArr[0])" class="d-block w-100" alt="...">
										</div>
										<div class="carousel-item">
											<img src="@Url.Content(ViewBag.ImageUrlArr[1])" class="d-block w-100" alt="...">
										</div>
										<div class="carousel-item">
											<img src="@Url.Content(ViewBag.ImageUrlArr[2])" class="d-block w-100" alt="...">
										</div>
									</div>
									<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators3" data-bs-slide="prev">
										<span class="carousel-control-prev-icon" aria-hidden="true"></span>
										<span class="visually-hidden">Previous</span>
									</button>
									<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators3" data-bs-slide="next">
										<span class="carousel-control-next-icon" aria-hidden="true"></span>
										<span class="visually-hidden">Next</span>
									</button>
								</div>
								<div class="card-body">
									<h5 class="card-title">@Model.Name</h5>

									@*使用前記得塞資料*@

									<p class="card-text">
										Some quick example text to build on the card title and make up the bulk of the card's content.
										Some quick example text to build on the card title and make up the bulk of the card's content.
										Some quick example text to build on the card title and make up the bulk of the card's content.
										Some quick example text to build on the card title and make up the bulk of the card's content.
									</p>
									<button id="btnCollapse2" data-bs-target="#collapseExample2" class="btn btn-primary detail" type="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapseExample2">Detail <i class="fa-solid fa-angle-down"></i></button>
									<div class="collapse collapsing" id="collapseExample2" style="width: 20rem; ">
										<div class="card card-body collapseCard">
											Some placeholder content for the collapse component. This panel is hidden by default but revealed when the user activates the relevant trigger.
										</div>
									</div>
								</div>
							</div>

						</div>
						<div class="d-flex justify-content-around buttons" style="width: 500px;">
							<button id="dislike-button" class="btn btn-secondary"><i class="fa-solid fa-xmark fa-shake"></i></button>
							<button class="btn btn-light"><i class="fa-regular fa-star fa-bounce"></i></button>
							<button id="like-button" class="btn btn-danger"><i class="fa-regular fa-heart fa-beat"></i></button>
						</div>
					</div>					
				</div>
			</div>
		</div>
	</div>
</div>


@section Scripts
{
	<script>
		// 選取所有卡片元素
		const cards = document.querySelectorAll('.cards');
		let startX, startY, currentCard;

		// 為每張卡片添加事件監聽器
		cards.forEach(card => {
			card.addEventListener('mousedown', startDrag);
			card.addEventListener('touchstart', startDrag);

			// 開始拖動時觸發的函數
			function startDrag(event) {
				currentCard = card;
				startX = event.touches ? event.touches[0].clientX : event.clientX;
				startY = event.touches ? event.touches[0].clientY : event.clientY;
				card.classList.add('dragging');

				// 添加全局事件監聽器
				document.addEventListener('mousemove', onDrag);
				document.addEventListener('touchmove', onDrag);
				document.addEventListener('mouseup', endDrag);
				document.addEventListener('touchend', endDrag);
			}

			// 拖動過程中觸發的函數
			function onDrag(event) {
				if (!currentCard) return;

				// 計算拖動距離
				let clientX = event.touches ? event.touches[0].clientX : event.clientX;
				let clientY = event.touches ? event.touches[0].clientY : event.clientY;
				let dx = clientX - startX;
				let dy = clientY - startY;

				// 更新卡片的位置和旋轉角度
				currentCard.style.transform = `translate(${dx}px, ${dy}px) rotate(${dx * 0.05}deg)`;
			}

			// 結束拖動時觸發的函數
			function endDrag(event) {
				if (!currentCard) return;

				// 計算拖動的最終距離
				let endX = event.changedTouches ? event.changedTouches[0].clientX : event.clientX;
				let dx = endX - startX;

				// 根據拖動距離決定卡片的去向
				if (dx > 100) {
					// 向右滑動，表示喜歡
					currentCard.style.transform = `translate(100vw, 0)`;
				} else if (dx < -100) {
					// 向左滑動，表示不喜歡
					currentCard.style.transform = `translate(-100vw, 0)`;
				} else {
					// 返回原位置
					currentCard.style.transform = '';
				}

				// 移除拖動樣式和事件監聽器
				currentCard.classList.remove('dragging');
				document.removeEventListener('mousemove', onDrag);
				document.removeEventListener('touchmove', onDrag);
				document.removeEventListener('mouseup', endDrag);
				document.removeEventListener('touchend', endDrag);

				currentCard = null;
			}
		});


		$(".detail").on('click',function () {
			var div = $(".buttons");
			var currentPosition = div.css('position');
			if (currentPosition === 'absolute') {
				div.css('position', 'fixed');

			} else if (currentPosition === 'fixed') {
				div.css('position', 'absolute');
			}
		});


		const likeButton = document.getElementById('like-button');
		likeButton.addEventListener('click', () => {
			const currentCard = document.querySelectorAll('.cards:not(.liked):not(.disliked)');
			if (currentCard.length) {
				currentCard[currentCard.length - 1].style.transform = `translate(100vw, 0)`;
				currentCard[currentCard.length - 1].classList.add('liked');
			}
			var div = $(".buttons");
			div.css('position', 'absolute');
		});

		const dislikeButton = document.getElementById('dislike-button');
		dislikeButton.addEventListener('click', () => {
			const currentCard = document.querySelectorAll('.cards:not(.liked):not(.disliked)');
			if (currentCard.length) {
				currentCard[currentCard.length - 1].style.transform = `translate(-100vw, 0)`;
				currentCard[currentCard.length - 1].classList.add('disliked');
			}
			var div = $(".buttons");
			div.css('position', 'absolute');
		});
	</script>
}